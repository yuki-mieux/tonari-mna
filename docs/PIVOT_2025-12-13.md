# Tonari ピボット記録 (2025-12-13)

## 概要

汎用会話支援AI → **人材業界の面接官・キャリアアドバイザー特化** へのピボット

---

## Before: 汎用会話支援AI

### コンセプト
- リアルタイム会話支援AI
- ビジネス会話を音声認識しながら、AIが即座にアドバイスを提供

### ターゲット
- 営業商談
- 採用面接
- 壁打ち（ブレインストーミング）
- 汎用的なビジネス会話

### 用語
- 「顧客」（customer）
- 「ナレッジ」（汎用的な知識）
- 「メモ」（会話メモ）

### 機能
- AIモード: 常時 / 質問時
- プロンプトモード: 営業補佐 / 採用補佐 / 壁打ち / カスタム
- ナレッジカテゴリ: 基本情報 / 議事録 / データ
- ファイルアップロード: MD / TXT / PDF
- 顧客ごとのカスタムプロンプト（system_prompt）

### Tool Calling
1. `search_knowledge` - キーワードでナレッジ検索
2. `get_customer_info` - 顧客基本情報取得
3. `get_past_meetings` - 過去の会話履歴取得
4. `get_customer_needs` - 顧客の課題・ニーズ取得

---

## After: 面接官向けAIパートナー

### コンセプト
> **「面接官の隣にいる、最高の相棒」**
>
> 人間の判断を代替するのではなく、人間がより良い判断をできるように支援する

### ターゲット
**人材紹介・人材派遣会社の面接官・キャリアアドバイザー**

### 価値提供
| 従来 | Tonari導入後 |
|------|-------------|
| 判断の質が個人の経験に依存 | 組織知+AIで全員の判断を底上げ |
| 見落としが発生して当然 | 確認漏れ・矛盾検知で限りなくゼロに |
| 無意識のバイアスが存在 | 可視化・指摘による是正 |
| ナレッジが蓄積されても活用困難 | リアルタイムで参照・提示 |
| 新人育成に3-5年 | 数ヶ月で戦力化 |

### 意思決定の判断基準
1. これは面接官の「判断の質」を上げるか？
2. これは面接官の「見落とし」を減らすか？
3. これは組織の「ナレッジ活用」を促進するか？
4. これは新人面接官の「立ち上がり」を早めるか？

### 絶対にやらないこと
- ❌ AIが面接する
- ❌ 単なる効率化ツール
- ❌ 判断の代替

### 用語変更
| Before | After |
|--------|-------|
| 顧客（customer） | 求職者（candidate） |
| ナレッジ | 面接チェックリスト / 確認事項テンプレート |
| メモ | 面接記録 |
| 会話 | 面接 |

### Tool Calling（再設計）
1. `search_interview_checklist` - 面接チェックリスト・確認事項を検索
2. `get_candidate_profile` - 求職者の基本情報・履歴書・希望条件を取得
3. `get_past_interviews` - この求職者との過去の面接記録を取得
4. `get_red_flags` - 過去の早期離職パターン・ミスマッチ事例を取得

---

## MVP機能仕分け

### ✅ 必須（残す）

| 機能 | 理由 |
|------|------|
| リアルタイム文字起こし | 傾聴に集中できる。メモ取りの認知負荷解放 |
| 話者分離（自分/相手） | 誰が何を言ったか明確化 |
| AIアドバイス（常時モード） | 矛盾検知・確認漏れアラート・深掘り提案 |
| ナレッジ参照（Tool Calling） | 組織知の即時活用 |
| 求職者選択 | 過去の面接履歴との紐付け |
| ナレッジ登録（手動入力） | チェックリスト・確認事項の蓄積 |
| 認証（ログイン） | データ保護・ユーザー分離 |

### ⚠️ 後回し

| 機能 | 理由 |
|------|------|
| 質問時モード | 常時モードで十分 |
| ファイルアップロード | 手動入力で代替可能 |
| カテゴリ分類 | ナレッジが少ないうちは不要 |
| リサイズ可能な2カラム | UX向上だが本質ではない |
| メモ保存機能 | 文字起こし自体がメモ |
| カスタムプロンプト | 固定プロンプトで十分 |

### ❌ 削除

| 機能 | 理由 |
|------|------|
| 汎用モード（営業補佐/壁打ち等） | 面接官支援に特化 |
| 顧客の「概要」フィールド | 求職者情報として再設計 |
| 顧客の「system_prompt」フィールド | カスタムプロンプト不要 |

---

## データベース変更（予定）

### Before: customersテーブル
```sql
CREATE TABLE customers (
  id UUID PRIMARY KEY,
  user_id UUID,
  name TEXT NOT NULL,
  description TEXT,        -- 削除予定
  system_prompt TEXT,      -- 削除予定
  created_at TIMESTAMPTZ,
  updated_at TIMESTAMPTZ
);
```

### After: candidatesテーブル（案）
```sql
CREATE TABLE candidates (
  id UUID PRIMARY KEY,
  user_id UUID,
  name TEXT NOT NULL,
  -- 求職者情報
  current_company TEXT,
  current_position TEXT,
  years_of_experience INTEGER,
  desired_position TEXT,
  desired_salary_min INTEGER,
  desired_salary_max INTEGER,
  available_from DATE,
  notes TEXT,
  created_at TIMESTAMPTZ,
  updated_at TIMESTAMPTZ
);
```

### Before: knowledgeテーブル
```sql
CREATE TABLE knowledge (
  id UUID PRIMARY KEY,
  customer_id UUID,
  title TEXT NOT NULL,
  content TEXT,
  category TEXT DEFAULT 'general',  -- 再設計予定
  created_at TIMESTAMPTZ,
  updated_at TIMESTAMPTZ
);
```

### After: interview_checklistsテーブル（案）
```sql
CREATE TABLE interview_checklists (
  id UUID PRIMARY KEY,
  user_id UUID,
  title TEXT NOT NULL,
  content TEXT,
  category TEXT DEFAULT 'general',  -- 'must_ask', 'red_flag', 'success_pattern'等
  created_at TIMESTAMPTZ,
  updated_at TIMESTAMPTZ
);
```

---

## UI変更（予定）

### ヘッダー
- 「顧客選択」→「求職者選択」
- AIモード選択（常時/質問時）→ 削除（常時のみ）

### 知識タブ
- 「顧客リスト」→「求職者リスト」
- フォルダツリー → シンプルなリスト（カテゴリ不要）

### AIアドバイス内容
- 汎用アドバイス → 面接特化
  - 「〇〇についてまだ確認していません」
  - 「先ほどの発言と矛盾している可能性があります」
  - 「この点を深掘りすると良いかもしれません」
  - 「過去の早期離職パターンと類似しています」

---

## 実装ステップ（案）

### Phase 1: 用語・UI変更
1. [ ] 「顧客」→「求職者」の用語変更（UI）
2. [ ] 質問時モードの削除
3. [ ] カスタムプロンプト機能の削除

### Phase 2: データモデル変更
1. [ ] customersテーブル → candidatesテーブルへのマイグレーション
2. [ ] 求職者情報フィールドの追加
3. [ ] knowledgeテーブルのカテゴリ再設計

### Phase 3: AIプロンプト最適化
1. [ ] 面接特化システムプロンプトの作成
2. [ ] Tool Callingの関数名・説明の変更
3. [ ] 矛盾検知・確認漏れアラートのロジック強化

### Phase 4: 検証・改善
1. [ ] 実際の面接官によるテスト
2. [ ] フィードバック収集
3. [ ] 改善サイクル

---

## 備考

- このドキュメントはピボットの記録として保持
- 実装の進捗に応じて更新
- 判断に迷った場合は「意思決定の判断基準」に立ち返る

作成日: 2025-12-13
